<!DOCTYPE REFENTRY PUBLIC "-//Sun Microsystems//DTD DocBook V3.0-Based SolBook Subset V2.0//EN" [
<!--ArborText, Inc., 1988-1999, v.4002-->
<!--ARC : LSARC 2002/522 GNOME 2.x Removable Media Management-->
<!ENTITY cmd "gnome-volcheck">
<!ENTITY % commonents SYSTEM "smancommon.ent">
%commonents;
<!ENTITY % booktitles SYSTEM "booktitles.ent">
%booktitles;
<!ENTITY suncopy "Copyright (c) 2003, Sun Microsystems, Inc. All Rights Reserved.">
]>
<?Pub UDT _bookmark _target>
<?Pub Inc>
<refentry id="gnome-volcheck-1">
<!-- %Z%%M% %I% %E% SMI; -->
<refmeta><refentrytitle>gnome-volcheck</refentrytitle><manvolnum>1</manvolnum>
<refmiscinfo class="date">2 Apr 2003</refmiscinfo>
<refmiscinfo class="sectdesc">&man1;</refmiscinfo>
<refmiscinfo class="software">&release;</refmiscinfo>
<refmiscinfo class="arch">generic</refmiscinfo>
<refmiscinfo class="copyright">&suncopy;</refmiscinfo>
</refmeta>
<indexterm><primary>gnome-volcheck</primary></indexterm><indexterm><primary>
monitors the removable media</primary></indexterm><refnamediv id="gnome-volcheck-1-name">
<refname>gnome-volcheck</refname><refpurpose>monitors removable media</refpurpose>
</refnamediv>
<refsynopsisdiv id="gnome-volcheck-1-synp"><title>&synp-tt;</title>
<cmdsynopsis><command>&cmd;</command><arg choice="opt"><option>i <replaceable>
time</replaceable></option></arg><arg choice="opt"><option>z <replaceable>
time</replaceable></option></arg><arg choice="opt"><option>m <replaceable>
media-types</replaceable></option></arg>
</cmdsynopsis></refsynopsisdiv>
<refsect1 id="gnome-volcheck-1-desc"><title>&desc-tt;</title>
<para>The <command>&cmd;</command> daemon monitors removable media for GNOME. <command>&cmd;</command>
is launched as a child process of <command>gnome-session</command>.</para>
<para><command>&cmd;</command> performs the following functions:
</para>
<itemizedlist>
<listitem>Removes any existing notification pipe used by
<command>&cmd;</command> to communicate with Action File Manager, as configured
by
<citerefentry><refentrytitle>rmmount.conf</refentrytitle><manvolnum>4</manvolnum></citerefentry>.
</listitem>
<listitem>Creates a new notification pipe to which Action File Manager writes.
</listitem>
<listitem>Listens on the notification pipe and interprets the data received.
</listitem>
<listitem>Launches the appropriate applications based on the data sent by
Action File Manager.</listitem>
</itemizedlist>
</refsect1>
<refsect1 id="gnome-volcheck-1-exde"><title>&exde-tt;</title>
<para><command>&cmd;</command> listens to the events generated by Action File
Manager, but only processes the media insert events. When an insert event
occurs, <command>&cmd;</command> may perform a number of actions. These actions
are based on the contents of the data files in the <filename>/tmp/.removable
</filename> directory, as follows:
</para>
<itemizedlist>
<listitem>
If a data file contains the text <literal>password_protected</literal>,
<command>&cmd;</command> launches the GNOME protect media application
to protect the corresponding media.</listitem>
<listitem>If a data file contains the text <literal>unformatted_media
</literal>, <command>&cmd;</command> launches the GNOME format media
application to format the corresponding media.</listitem>
<listitem>If a data file contains the text <literal>audio_only</literal>,
<command>&cmd;</command> launches GNOME CD Player.</listitem>
<listitem>If a data file does not contain any of the above,
<command>&cmd;</command> launches Nautilus file manager to handle the
corresponding media. For multisegment media, <command>&cmd;</command> launches
a single file-manager view, instead of a file-manager view per segment.
</listitem>
</itemizedlist>
</refsect1>
<refsect1 id="gnome-volcheck-1-opts"><title>&opts-tt;</title>
<para>The following options are supported:</para>
<variablelist termlength="narrow"><varlistentry><term><option>i <replaceable>
time</replaceable></option></term><listitem><para>Specifies the number of
seconds to wait before starting the file manager. </para>
<para>The minimum value is 0 seconds. The maximum value is 65535 seconds.
The default value is <literal>30</literal> seconds. If the specified value
is close to the minimum or maximum value, the removable media feature may
not work. If the specified value is outside the permitted range, the default
value is used.</para>
<para>If the file manager is in the user's session, the delay will ensure
that the file manager desktop view is started instead of the file manager
view, if any media is present in the drive during login. If the file manager
is not in the user's session, the delay will minimize the impact of run-time
load on the system.</para>
</listitem></varlistentry>
<varlistentry><term><option>z <replaceable>time</replaceable></option></term>
<listitem><para>Specifies the number of seconds to wait before checking the
notification file. </para>
<para>The minimum value is 0 seconds. The maximum value is 65535 seconds.
The default value is <literal>3</literal> seconds. If the specified value
is close to the minimum or maximum value, the removable media feature may
not work. If the specified value is outside the permitted range, the default
value is used.</para>
<para>This option is needed for multisegment media. Action File Manager creates
an insert event per segment. After 3 seconds sleep, <command>&cmd;</command>
checks to see whether there are additional insert events. This check is necessary
to ensure that <command>&cmd;</command> can handle correctly all events generated
by Action File Manager.</para>
</listitem></varlistentry>
<varlistentry><term><option>m <replaceable>media</replaceable></option></term>
<listitem><para>Specifies the media types to be monitored. The supported values
are <literal>cdrom</literal>, <literal>floppy</literal>, <literal>zip</literal>, <literal>
jaz</literal>, and <literal>dvdrom</literal>. If the <option>m</option> option
is not specified, all media types are monitored.</para>
</listitem></varlistentry>
</variablelist></refsect1>
<refsect1 id="gnome-volcheck-1-exam"><title>&exam-tt;</title>
<example role="example"><title>Monitoring Several Removable Media With &cmd;</title>
<para><screen>example% <userinput>&cmd; -i 40 -z 4 -m cdrom,zip,jaz,dvdrom
</userinput></screen></para>
</example>
<para>This example shows how to run <command>&cmd;</command> with an initial
sleep time of 40 seconds, and with 4 seconds of wait time before reading data
files, to monitor the CD-ROM, Zip, Jaz, and DVD&mdash;ROM media types.</para>
</refsect1>
<refsect1 id="gnome-volcheck-1-envr"><title>&envr-tt;</title>
<para>See <citerefentry><refentrytitle>environ</refentrytitle><manvolnum>
5</manvolnum></citerefentry> for descriptions of the following environment
variables that affect the execution of <command>&cmd;</command>: NLSPATH.
</para>
</refsect1>
<refsect1 id="gnome-volcheck-1-exit"><title>&exit-tt;</title>
<para>The following exit values are returned:</para>
<variablelist termlength="xtranarrow"><varlistentry><term><returnvalue>0</returnvalue></term>
<listitem><para>Application exited successfully</para>
</listitem></varlistentry>
<varlistentry><term><returnvalue>2</returnvalue></term><listitem><para>Application
failed to read from or write to <filename>/tmp/.removable</filename></para>
</listitem></varlistentry>
<varlistentry><term><returnvalue>3</returnvalue></term><listitem><para>Application
failed to create notification pipe</para>
</listitem></varlistentry>
</variablelist></refsect1>
<refsect1 id="gnome-volcheck-1-file"><title>&file-tt;</title>
<para>The following files are used by this application:</para>
<variablelist termlength="wholeline"><varlistentry><term><filename>/usr/bin/&cmd;</filename> 
</term><listitem><para>The command-line executable for the application.</para>
</listitem></varlistentry>
<varlistentry><term><filename>/usr/dt/config/Xinitrc.Sun-gnome-2.0-fcs</filename> 
</term><listitem><para>The Sun GNOME Xsession startup configuration script.
</para>
</listitem></varlistentry>
<varlistentry><term><filename>/tmp/.removable/notify<replaceable>pid</replaceable></filename> 
</term><listitem><para>The notification pipe.</para>
</listitem></varlistentry>
</variablelist></refsect1>
<refsect1 id="gnome-volcheck-1-attr"><title>&attr-tt;</title>
<para>See <olink targetdocent="REFMAN5" localinfo="attributes-5"><citerefentry>
<refentrytitle>attributes</refentrytitle><manvolnum>5</manvolnum></citerefentry></olink>
for descriptions of the following attributes:</para>
<informaltable frame="all">
<tgroup cols="2" colsep="1" rowsep="1"><colspec colname="COLSPEC0" colwidth="1*">
<colspec colname="COLSPEC1" colwidth="1*">
<thead>
<row><entry align="center" valign="middle">ATTRIBUTE TYPE</entry><entry align="center"
valign="middle">ATTRIBUTE VALUE</entry></row>
</thead>
<tbody>
<row><entry><para>Availability</para></entry><entry><para>SUNWgnome-removable-media
</para></entry></row>
<row><entry colname="COLSPEC0"><para>Interface stability</para></entry><entry
colname="COLSPEC1"><para>Volatile</para></entry></row>
</tbody>
</tgroup>
</informaltable>
</refsect1>
<refsect1 id="gnome-volcheck-1-also"><title>&also-tt;</title>
<!--Reference to another man page-->
<!--Reference to a Help manual-->
<!--Reference to a book.-->
<para>
<citerefentry><refentrytitle>nautilus</refentrytitle><manvolnum>1</manvolnum></citerefentry>,
<citerefentry><refentrytitle>vold</refentrytitle><manvolnum>1M</manvolnum></citerefentry>,
<citerefentry><refentrytitle>rmmount</refentrytitle><manvolnum>1M</manvolnum></citerefentry>,
<citerefentry><refentrytitle>rmmount.conf</refentrytitle><manvolnum>4</manvolnum></citerefentry>
<citerefentry><refentrytitle>attributes</refentrytitle><manvolnum>5</manvolnum></citerefentry>,
<citerefentry><refentrytitle>environ</refentrytitle><manvolnum>5</manvolnum></citerefentry>
</para>
</refsect1>
<refsect1 id="gnome-volcheck-1-note"><title>&note-tt;</title>
<para><command>&cmd;</command> is a system administration program. It must
be invoked as a child of <command>gnome-session</command>. If invoked in any
other way, <command>&cmd;</command> behavior is not predictable.</para>
<para>Written by Ghee Teo, Sun Microsystems Inc., 2003.</para>
</refsect1>
</refentry>
